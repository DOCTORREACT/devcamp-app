import React, { useEffect, useState } from 'react'
import axios from 'axios'
import './Bootcamp.css'
import Input from "components/Input/Input";
import Button from 'components/Button/Button'
import BootcampProduct from 'components/BootcampProduct/BootcampProduct'

import img_1 from '../../img/image_1.jpg'
import img_2 from '../../img/image_2.jpg'
import img_3 from '../../img/image_3.jpg'
import img_4 from '../../img/image_4.jpg'

const photos = [img_1, img_2, img_3, img_4]

const bootcampsUrl = 'http://devcamp-api-node.herokuapp.com/api/v1/bootcamps'


const Bootcamp = () => {

const [ bootcampsArray, setBootcampsArray ] = useState([])

    useEffect(() => {
        if(bootcampsArray.length === 0) {
            document.querySelector('.number_selector').classList.add('hide')
        }

        axios.get(bootcampsUrl).then((res) => {
            document.querySelector('.number_selector').classList.remove('hide')
            document.querySelector('.lds-dual-ring').classList.add('hide')
            setBootcampsArray(res.data.data)
        })  
    }, [])


    return (
        <div className={'bootcamp_container'}>
            <div className="bootcamp_left_side">
                <form className="bootcamp_location">
                    <p className={'bootcamp_title'}>By Location</p>
                    <div className="bootcamp_inputs">
                        <Input
                            className={'bootcamp'}
                            title={'Miles From'}
                            name={'miles_from'}        
                        />
                        <Input
                            className={'bootcamp'}
                            title={'Enter Zipcode'}
                            name={'enter_zipcode'}
                        />
                    </div>
                    <Button className={'bootcamp'} width={'100%'} title={'Find Bootcamps'}></Button>
                </form>
                <form className={'bootcamp_filter_form'}>
                <p className={'bootcamp_title'}>Filter</p>
                <p>Rating</p>
                <select>
                    <option>Any</option>
                </select>
                <p>Budget</p>
                <select >
                    <option className='options'>Any</option>
                </select>
                <Button title={'Find Bootcamps'} className={'bootcamp_filter'}></Button>
                </form>
            </div>
                    <div className="bootcamp_right_side">
                        <div className="lds-dual-ring"></div>
                            {
                                 bootcampsArray.map((boot, index) => {
                                     return <BootcampProduct 
                                            key={boot.id}
                                            photo={photos[index]}
                                            description={boot.description}
                                            title={boot.careers}
                                            location={boot.address}
                                            rating={'8.8'}
                                    />
                                 })
                             }

                        <div className="number_selector"> 
                            <div className='prev_page'>
                                Prev
                                </div>
                            <div className='number_page'>
                                 1 
                                 </div>
                            <div className='number_page'>
                                2 
                                </div>
                            <div className='number_page'>
                                 3
                                 </div>
                            <div className='next_page'>
                                Next
                                </div>
                        </div>
                    </div>
                        
            </div>
    )
}

export default Bootcamp